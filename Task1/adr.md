# ADR 001 — Контекстная архитектура

_Дата:_ 10.12.2025
_Автор:_ Валерий

### Функциональные требования

| **№** | **Действующие лица или системы** | **Use Case**          | **Описание**                                                              |
| :---: | :------------------------------- | :-------------------- | :------------------------------------------------------------------------ |
|   1   | Директор хозяйства               | Управление платформой | Доступ к порталу для мониторинга состояния поголовья, техники и аналитики |
|   2   | Механик                          | Мониторинг техники    | Отслеживает состояние техники, реагирует на неисправности                 |
|   3   | Аналитик                         | Анализ данных         | Собирает и анализирует метрики, строит отчеты                             |
|   4   | Дежурный сотрудник платформы     | Управление платформой | Следит за исправностью платформы и реагирует на сбои                      |

### Нефункциональные требования

| **№** | **Требование**                                                                                                                                |
| :---: | :-------------------------------------------------------------------------------------------------------------------------------------------- |
|   1   | обеспечивать отказоустойчивость **99,95%**                                                                                                    |
|   2   | быть расширяемой (новый функционал без изменений существующего)                                                                               |
|   3   | иметь высокую производительность: от момента фиксации нештатной ситуации видеоаналитикой до оповещения должно проходить не более **5 секунд** |
|   4   | обеспечивать реакцию видеоаналитики в реальном времени (миллисекунды)                                                                         |

### Решение

Контур платформы включает:

- Дежурный сотрудник платформы
- Платформа для мониторинга скота
- Директор, Механик, Аналитик как пользователи

Логика:

- Платформа централизованно собирает данные со всех источников.
- Директор получает доступ к порталу, аналитик собирает метрики, механик и дежурный сотрудник реагируют на события.
- Простая архитектура для MVP, минимальные зависимости.

Технологический выбор:

- Используется единая платформа для агрегации данных.
- Минимальные внешние интеграции, упрощение внедрения MVP.

[С1 - Основное решение](c1_main.puml)

### Альтернативы

Контур платформы расширен отдельной обработкой данных:

- IoT-шлюз (Node-RED) собирает данные с фермы.
- Apache Kafka как шина данных.
- BI-система (Power BI) для аналитики и отчетности.
- Директор и аналитик используют BI-систему, дежурный сотрудник и механик работают с платформой.

Преимущества:

- Высокая масштабируемость и возможность подключения нескольких ферм.
- Разделение обработки данных и визуализации.
- Гибкость для будущей SaaS-архитектуры.

**Недостатки, ограничения, риски:**

- Более сложная инфраструктура.
- Требуется надежное соединение между шлюзом и платформой.
- Возможное дублирование данных между платформой и BI.

[С1 - альтернативное решение](c1_alt.puml)
